(function(_0x3f8ecb,_0x21a95b){const _0x1e933f=_0x4b4f,_0x3df0fb=_0x3f8ecb();while(!![]){try{const _0x4fb1b9=parseInt(_0x1e933f(0x204,'75RA'))/0x1*(-parseInt(_0x1e933f(0x214,'6eGK'))/0x2)+parseInt(_0x1e933f(0x20a,'gkq5'))/0x3*(parseInt(_0x1e933f(0x1ce,'rZkh'))/0x4)+-parseInt(_0x1e933f(0x1ca,'^cBI'))/0x5*(parseInt(_0x1e933f(0x1ee,'rYBJ'))/0x6)+-parseInt(_0x1e933f(0x221,'@NeY'))/0x7*(-parseInt(_0x1e933f(0x229,'Yjg$'))/0x8)+-parseInt(_0x1e933f(0x220,'SvF7'))/0x9+-parseInt(_0x1e933f(0x223,'nVHC'))/0xa+parseInt(_0x1e933f(0x1cf,'8LGt'))/0xb;if(_0x4fb1b9===_0x21a95b)break;else _0x3df0fb['push'](_0x3df0fb['shift']());}catch(_0x6aa781){_0x3df0fb['push'](_0x3df0fb['shift']());}}}(_0x4830,0xb0d09));const _0x49cf61=(function(){let _0x1cc350=!![];return function(_0x39cf30,_0x103092){const _0x5de738=_0x1cc350?function(){if(_0x103092){const _0x1cc596=_0x103092['apply'](_0x39cf30,arguments);return _0x103092=null,_0x1cc596;}}:function(){};return _0x1cc350=![],_0x5de738;};}()),_0x3bfef3=_0x49cf61(this,function(){const _0x2641ef=_0x4b4f;return _0x3bfef3[_0x2641ef(0x1e6,'#5e(')]()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x3bfef3)['search']('(((.+)+)+)+$');});_0x3bfef3();const _0xc05f8d=(function(){let _0x2470f6=!![];return function(_0x4fc856,_0x16f908){const _0x213f91=_0x2470f6?function(){const _0x411074=_0x4b4f;if(_0x16f908){const _0x5a11f8=_0x16f908[_0x411074(0x207,'aIEW')](_0x4fc856,arguments);return _0x16f908=null,_0x5a11f8;}}:function(){};return _0x2470f6=![],_0x213f91;};}()),_0x350d52=_0xc05f8d(this,function(){const _0x5716ec=_0x4b4f;let _0x329db0;try{const _0x414e58=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x329db0=_0x414e58();}catch(_0x36f101){_0x329db0=window;}const _0x1f2e41=_0x329db0['console']=_0x329db0['console']||{},_0x264916=[_0x5716ec(0x224,'#5e('),'warn','info','error',_0x5716ec(0x1c6,'%SF$'),'table','trace'];for(let _0x22bb83=0x0;_0x22bb83<_0x264916['length'];_0x22bb83++){const _0x24d000=_0xc05f8d['constructor']['prototype']['bind'](_0xc05f8d),_0x509559=_0x264916[_0x22bb83],_0x5b5a84=_0x1f2e41[_0x509559]||_0x24d000;_0x24d000[_0x5716ec(0x1f3,'rZkh')]=_0xc05f8d['bind'](_0xc05f8d),_0x24d000['toString']=_0x5b5a84['toString']['bind'](_0x5b5a84),_0x1f2e41[_0x509559]=_0x24d000;}});_0x350d52();function hashString(_0x4a7105){const _0x16acde=_0x4b4f;let _0xc27a30=0x0;for(let _0x32e4da=0x0;_0x32e4da<_0x4a7105['length'];_0x32e4da++){const _0x2d6134=_0x4a7105['charCodeAt'](_0x32e4da);_0xc27a30=(_0xc27a30<<0x5)-_0xc27a30+_0x2d6134,_0xc27a30|=0x0;}return(_0xc27a30>>>0x0)[_0x16acde(0x1c1,'aIEW')]();}const DEBUG=!![];function logDebug(_0x23e421,..._0x2960c9){const _0x496b84=_0x4b4f;DEBUG&&console['debug'](new Date()['toISOString'](),_0x496b84(0x1f6,'gOTM'),_0x23e421,..._0x2960c9);}function logInfo(_0x2240a0,..._0x402e98){const _0x3f435a=_0x4b4f;console['info'](new Date()['toISOString'](),_0x3f435a(0x1fe,'m]Jh'),_0x2240a0,..._0x402e98);}function logError(_0x5c83ac,..._0x2bd500){console['error'](new Date()['toISOString'](),'[ERROR]',_0x5c83ac,..._0x2bd500);}function _0x4b4f(_0x352c5e,_0xcce06b){const _0x241418=_0x4830();return _0x4b4f=function(_0x350d52,_0xc05f8d){_0x350d52=_0x350d52-0x1b9;let _0x15ac7d=_0x241418[_0x350d52];if(_0x4b4f['RlaZTe']===undefined){var _0x3a1782=function(_0x2c243b){const _0x3002a8='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x48d274='',_0x444b86='',_0x22361f=_0x48d274+_0x3a1782;for(let _0x2ed303=0x0,_0x1cc350,_0x39cf30,_0x103092=0x0;_0x39cf30=_0x2c243b['charAt'](_0x103092++);~_0x39cf30&&(_0x1cc350=_0x2ed303%0x4?_0x1cc350*0x40+_0x39cf30:_0x39cf30,_0x2ed303++%0x4)?_0x48d274+=_0x22361f['charCodeAt'](_0x103092+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x1cc350>>(-0x2*_0x2ed303&0x6)):_0x2ed303:0x0){_0x39cf30=_0x3002a8['indexOf'](_0x39cf30);}for(let _0x5de738=0x0,_0x1cc596=_0x48d274['length'];_0x5de738<_0x1cc596;_0x5de738++){_0x444b86+='%'+('00'+_0x48d274['charCodeAt'](_0x5de738)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x444b86);};const _0x4b4faa=function(_0x2470f6,_0x4fc856){let _0x16f908=[],_0x213f91=0x0,_0x5a11f8,_0x329db0='';_0x2470f6=_0x3a1782(_0x2470f6);let _0x1f2e41;for(_0x1f2e41=0x0;_0x1f2e41<0x100;_0x1f2e41++){_0x16f908[_0x1f2e41]=_0x1f2e41;}for(_0x1f2e41=0x0;_0x1f2e41<0x100;_0x1f2e41++){_0x213f91=(_0x213f91+_0x16f908[_0x1f2e41]+_0x4fc856['charCodeAt'](_0x1f2e41%_0x4fc856['length']))%0x100,_0x5a11f8=_0x16f908[_0x1f2e41],_0x16f908[_0x1f2e41]=_0x16f908[_0x213f91],_0x16f908[_0x213f91]=_0x5a11f8;}_0x1f2e41=0x0,_0x213f91=0x0;for(let _0x264916=0x0;_0x264916<_0x2470f6['length'];_0x264916++){_0x1f2e41=(_0x1f2e41+0x1)%0x100,_0x213f91=(_0x213f91+_0x16f908[_0x1f2e41])%0x100,_0x5a11f8=_0x16f908[_0x1f2e41],_0x16f908[_0x1f2e41]=_0x16f908[_0x213f91],_0x16f908[_0x213f91]=_0x5a11f8,_0x329db0+=String['fromCharCode'](_0x2470f6['charCodeAt'](_0x264916)^_0x16f908[(_0x16f908[_0x1f2e41]+_0x16f908[_0x213f91])%0x100]);}return _0x329db0;};_0x4b4f['rAEoZj']=_0x4b4faa,_0x352c5e=arguments,_0x4b4f['RlaZTe']=!![];}const _0x3bfef3=_0x241418[0x0],_0x49cf61=_0x350d52+_0x3bfef3,_0x48305d=_0x352c5e[_0x49cf61];if(!_0x48305d){if(_0x4b4f['mtIcJc']===undefined){const _0x414e58=function(_0x36f101){this['QGenYM']=_0x36f101,this['oFcRwR']=[0x1,0x0,0x0],this['dIMTUH']=function(){return'newState';},this['zWMkXJ']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['XfGVBj']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x414e58['prototype']['PnszNc']=function(){const _0x22bb83=new RegExp(this['zWMkXJ']+this['XfGVBj']),_0x24d000=_0x22bb83['test'](this['dIMTUH']['toString']())?--this['oFcRwR'][0x1]:--this['oFcRwR'][0x0];return this['AGQdnm'](_0x24d000);},_0x414e58['prototype']['AGQdnm']=function(_0x509559){if(!Boolean(~_0x509559))return _0x509559;return this['NtSYqG'](this['QGenYM']);},_0x414e58['prototype']['NtSYqG']=function(_0x5b5a84){for(let _0x4a7105=0x0,_0xc27a30=this['oFcRwR']['length'];_0x4a7105<_0xc27a30;_0x4a7105++){this['oFcRwR']['push'](Math['round'](Math['random']())),_0xc27a30=this['oFcRwR']['length'];}return _0x5b5a84(this['oFcRwR'][0x0]);},new _0x414e58(_0x4b4f)['PnszNc'](),_0x4b4f['mtIcJc']=!![];}_0x15ac7d=_0x4b4f['rAEoZj'](_0x15ac7d,_0xc05f8d),_0x352c5e[_0x49cf61]=_0x15ac7d;}else _0x15ac7d=_0x48305d;return _0x15ac7d;},_0x4b4f(_0x352c5e,_0xcce06b);}const MIN_CHUNK_DURATION=0x1d4c0,MAX_CHUNK_DURATION=0x1d4c0,watchdogThreshold=0x5dc;let mediaStream=null,processedAnyAudioFrames=![],audioReader=null,recordingStartTime=0x0,accumulatedRecordingTime=0x0,recordingTimerInterval,completionTimerInterval=null,completionStartTime=0x0,groupId=null,chunkNumber=0x1,manualStop=![],transcriptChunks={},pollingIntervals={},chunkStartTime=0x0,lastFrameTime=0x0,chunkTimeoutId,chunkProcessingLock=![],pendingStop=![],finalChunkProcessed=![],recordingPaused=![],audioFrames=[],transcriptionQueue=[],isProcessingQueue=![];function updateStatusMessage(_0x35b593,_0x21bc91='#333'){const _0xb81dd3=_0x4b4f,_0x31c9c9=document['getElementById']('statusMessage');_0x31c9c9&&(_0x31c9c9[_0xb81dd3(0x1c9,'L)x$')]=_0x35b593,_0x31c9c9[_0xb81dd3(0x1ff,'SYGx')]['color']=_0x21bc91);}function formatTime(_0x221d53){const _0x4fc16d=_0x4b4f,_0x462456=Math[_0x4fc16d(0x1fb,'e*5r')](_0x221d53/0x3e8);if(_0x462456<0x3c)return _0x462456+'\x20sec';else{const _0xec6171=Math[_0x4fc16d(0x1db,'!0c%')](_0x462456/0x3c),_0x7108f0=_0x462456%0x3c;return _0xec6171+_0x4fc16d(0x205,'dGT0')+(_0x7108f0>0x0?'\x20'+_0x7108f0+_0x4fc16d(0x212,'St(O'):'');}}function updateRecordingTimer(){const _0x41fbaf=_0x4b4f,_0x55c08f=accumulatedRecordingTime+(Date[_0x41fbaf(0x201,'KM]R')]()-recordingStartTime),_0x1d6fda=document['getElementById']('recordTimer');_0x1d6fda&&(_0x1d6fda['innerText']=_0x41fbaf(0x1ed,'gOTM')+formatTime(_0x55c08f));}function stopMicrophone(){const _0x59bcd3=_0x4b4f;mediaStream&&(mediaStream[_0x59bcd3(0x21b,'rYBJ')]()['forEach'](_0x1d347d=>_0x1d347d['stop']()),mediaStream=null,logInfo(_0x59bcd3(0x1f2,'!0c%'))),audioReader&&(audioReader['cancel'](),audioReader=null);}function arrayBufferToBase64(_0x58b0be){const _0x52da57=_0x4b4f;let _0x3737ef='';const _0x397eab=new Uint8Array(_0x58b0be);for(let _0x2ae4da=0x0;_0x2ae4da<_0x397eab['byteLength'];_0x2ae4da++){_0x3737ef+=String['fromCharCode'](_0x397eab[_0x2ae4da]);}return window[_0x52da57(0x1df,'St(O')](_0x3737ef);}function base64ToArrayBuffer(_0x30cad1){const _0x240f13=_0x4b4f,_0x764f1a=window[_0x240f13(0x1cc,'6eGK')](_0x30cad1),_0x162a1a=_0x764f1a['length'],_0x5c3235=new Uint8Array(_0x162a1a);for(let _0x2bf085=0x0;_0x2bf085<_0x162a1a;_0x2bf085++){_0x5c3235[_0x2bf085]=_0x764f1a['charCodeAt'](_0x2bf085);}return _0x5c3235;}function getDeviceToken(){const _0x10939c=_0x4b4f;let _0x2f0186=localStorage[_0x10939c(0x1e4,'gOTM')](_0x10939c(0x1d1,'(wsp'));return!_0x2f0186&&(_0x2f0186=crypto[_0x10939c(0x22d,'w$HK')](),localStorage[_0x10939c(0x218,'75RA')]('device_token',_0x2f0186)),_0x2f0186;}function getAPIKey(){const _0x9edc04=_0x4b4f;return sessionStorage[_0x9edc04(0x20c,'H0J8')](_0x9edc04(0x1e9,'#5e('));}async function encryptFileBlob(_0x2bb987){const _0x37df03=getAPIKey();if(!_0x37df03)throw new Error('API\x20key\x20not\x20available');const _0x70888a=getDeviceToken(),_0x58eeb9=hashString(_0x37df03),_0x598427=hashString(_0x70888a);return{'encryptedBlob':_0x2bb987,'iv':'','salt':'','apiKeyMarker':_0x58eeb9,'deviceMarker':_0x598427};}async function processAudioUsingOfflineContext(_0x13a369,_0x54e55f,_0x1ec6a4){const _0x8cfe44=_0x4b4f,_0xfde703=0x3e80,_0x53d6ae=_0x13a369['length']/_0x1ec6a4;let _0xc1071b=new AudioContext(),_0x530ef9=_0xc1071b[_0x8cfe44(0x1fc,'SvF7')](_0x1ec6a4,_0x53d6ae,_0x54e55f);if(_0x1ec6a4===0x1)_0x530ef9[_0x8cfe44(0x1c5,'m]Jh')](_0x13a369,0x0);else for(let _0x3a9fa1=0x0;_0x3a9fa1<_0x1ec6a4;_0x3a9fa1++){let _0x1cb18b=new Float32Array(_0x53d6ae);for(let _0x288409=0x0;_0x288409<_0x53d6ae;_0x288409++){_0x1cb18b[_0x288409]=_0x13a369[_0x288409*_0x1ec6a4+_0x3a9fa1];}_0x530ef9['copyToChannel'](_0x1cb18b,_0x3a9fa1);}let _0x2d480c;if(_0x1ec6a4>0x1){let _0x4bf190=new Float32Array(_0x53d6ae);for(let _0x3762d5=0x0;_0x3762d5<_0x53d6ae;_0x3762d5++){let _0x47b5ec=0x0;for(let _0x4c8a5c=0x0;_0x4c8a5c<_0x1ec6a4;_0x4c8a5c++){_0x47b5ec+=_0x530ef9['getChannelData'](_0x4c8a5c)[_0x3762d5];}_0x4bf190[_0x3762d5]=_0x47b5ec/_0x1ec6a4;}_0x2d480c=_0xc1071b['createBuffer'](0x1,_0x53d6ae,_0x54e55f),_0x2d480c[_0x8cfe44(0x1d5,'WIu)')](_0x4bf190,0x0);}else _0x2d480c=_0x530ef9;_0xc1071b['close']();const _0x421a05=_0x2d480c['duration'],_0x41acf9=new OfflineAudioContext(0x1,_0xfde703*_0x421a05,_0xfde703),_0x299983=_0x41acf9['createBufferSource']();_0x299983['buffer']=_0x2d480c;const _0xbd4261=_0x41acf9['createGain'](),_0x47fa7e=0.3;_0xbd4261[_0x8cfe44(0x1bb,'!0c%')]['setValueAtTime'](0x0,0x0),_0xbd4261[_0x8cfe44(0x21a,'%SF$')]['linearRampToValueAtTime'](0x1,_0x47fa7e);const _0x53aea7=Math['max'](0x0,_0x421a05-_0x47fa7e);_0x421a05<_0x47fa7e*0x2&&console[_0x8cfe44(0x1c0,'H0J8')]('[Audio]\x20Short\x20chunk\x20('+_0x421a05[_0x8cfe44(0x1c2,'CF$Q')](0x2)+'s)\x20—\x20fade-in/out\x20may\x20be\x20squished');_0xbd4261['gain']['setValueAtTime'](0x1,_0x53aea7),_0xbd4261['gain']['linearRampToValueAtTime'](0x0,_0x421a05),_0x299983['connect'](_0xbd4261)[_0x8cfe44(0x1de,'#YpX')](_0x41acf9[_0x8cfe44(0x1f5,'mhkq')]),_0x299983[_0x8cfe44(0x203,'8qd2')](0x0);const _0x5e64a9=await _0x41acf9['startRendering'](),_0x40054d=_0x5e64a9['getChannelData'](0x0),_0x1d2f2b=floatTo16BitPCM(_0x40054d),_0x56d3de=encodeWAV(_0x1d2f2b,_0xfde703,0x1);return _0x56d3de;}async function transcribeChunkDirectly(_0x4c4bb6,_0x5d0f48){const _0x1a0a18=_0x4b4f,_0x1bbdc4=getAPIKey();if(!_0x1bbdc4)throw new Error(_0x1a0a18(0x1e2,'$5!]'));const _0x45a792=new FormData();_0x45a792['append']('file',_0x4c4bb6,'chunk_'+_0x5d0f48+'.wav'),_0x45a792['append']('model','whisper-1');try{const _0x248d84=await fetch(_0x1a0a18(0x1f4,'rYBJ'),{'method':_0x1a0a18(0x1cd,'Au(['),'headers':{'Authorization':'Bearer\x20'+_0x1bbdc4},'body':_0x45a792});if(!_0x248d84['ok']){const _0x281e93=await _0x248d84['text']();throw new Error(_0x1a0a18(0x1dc,'#5e(')+_0x281e93);}const _0x157371=await _0x248d84['json']();return _0x157371['text']||'';}catch(_0x1249c8){return logError('Error\x20transcribing\x20chunk\x20'+_0x5d0f48+':',_0x1249c8),_0x1a0a18(0x1e5,'CF$Q')+_0x5d0f48+']';}}function enqueueTranscription(_0x22f481,_0x4fc086){transcriptionQueue['push']({'chunkNum':_0x4fc086,'wavBlob':_0x22f481}),processTranscriptionQueue();}async function processTranscriptionQueue(){const _0x16e5f7=_0x4b4f;if(isProcessingQueue)return;isProcessingQueue=!![];while(transcriptionQueue['length']>0x0){const {chunkNum:_0x2f232d,wavBlob:_0x2caeaa}=transcriptionQueue[_0x16e5f7(0x20b,'#5e(')]();logInfo('Transcribing\x20chunk\x20'+_0x2f232d+'...');const _0x1840be=await transcribeChunkDirectly(_0x2caeaa,_0x2f232d);transcriptChunks[_0x2f232d]=_0x1840be,updateTranscriptionOutput();}isProcessingQueue=![];}async function processAudioChunkInternal(_0x416905=![]){const _0x5e2979=_0x4b4f;if(audioFrames['length']===0x0){logDebug('No\x20audio\x20frames\x20to\x20process.');return;}processedAnyAudioFrames=!![],logInfo('Processing\x20'+audioFrames['length']+'\x20audio\x20frames\x20for\x20chunk\x20'+chunkNumber+'.');const _0x332ff1=audioFrames;audioFrames=[];const _0x17494b=_0x332ff1[0x0]['sampleRate'],_0x47af11=_0x332ff1[0x0]['numberOfChannels'];let _0x5e0439=[];for(const _0x36af3a of _0x332ff1){const _0x20796a=_0x36af3a['numberOfFrames'];if(_0x47af11===0x1){const _0x3125c5=new Float32Array(_0x20796a);_0x36af3a['copyTo'](_0x3125c5,{'planeIndex':0x0}),_0x5e0439['push'](_0x3125c5);}else{let _0x22c55d=[];for(let _0x225cd7=0x0;_0x225cd7<_0x47af11;_0x225cd7++){const _0x59fdcc=new Float32Array(_0x20796a);_0x36af3a['copyTo'](_0x59fdcc,{'planeIndex':_0x225cd7}),_0x22c55d['push'](_0x59fdcc);}const _0x34a31d=new Float32Array(_0x20796a*_0x47af11);for(let _0x28a6e7=0x0;_0x28a6e7<_0x20796a;_0x28a6e7++){for(let _0x3f5bdc=0x0;_0x3f5bdc<_0x47af11;_0x3f5bdc++){_0x34a31d[_0x28a6e7*_0x47af11+_0x3f5bdc]=_0x22c55d[_0x3f5bdc][_0x28a6e7];}}_0x5e0439[_0x5e2979(0x1e0,'L)x$')](_0x34a31d);}_0x36af3a[_0x5e2979(0x1ea,'nVHC')]();}const _0xd746ff=_0x5e0439['reduce']((_0x14c244,_0x26b5e9)=>_0x14c244+_0x26b5e9['length'],0x0),_0x54a7e0=new Float32Array(_0xd746ff);let _0x5806cf=0x0;for(const _0x57c039 of _0x5e0439){_0x54a7e0['set'](_0x57c039,_0x5806cf),_0x5806cf+=_0x57c039[_0x5e2979(0x1f8,'SYGx')];}const _0x3a5617=await processAudioUsingOfflineContext(_0x54a7e0,_0x17494b,_0x47af11);enqueueTranscription(_0x3a5617,chunkNumber),chunkNumber++;}async function safeProcessAudioChunk(_0x4e1c19=![]){const _0xf1aed1=_0x4b4f;if(manualStop&&finalChunkProcessed){logDebug('Final\x20chunk\x20already\x20processed;\x20skipping\x20safeProcessAudioChunk.');return;}if(chunkProcessingLock){logDebug(_0xf1aed1(0x206,'mhkq'));return;}chunkProcessingLock=!![],await processAudioChunkInternal(_0x4e1c19),chunkProcessingLock=![],pendingStop&&(pendingStop=![],finalizeStop());}function finalizeStop(){const _0x3756a6=_0x4b4f;completionStartTime=Date['now'](),completionTimerInterval=setInterval(()=>{const _0x22e78a=_0x4b4f,_0x19d2f1=document['getElementById']('transcribeTimer');_0x19d2f1&&(_0x19d2f1['innerText']=_0x22e78a(0x1be,'bx3d')+formatTime(Date['now']()-completionStartTime));},0x3e8);const _0x312e6b=document['getElementById'](_0x3756a6(0x1c8,'^cBI')),_0x39289f=document['getElementById'](_0x3756a6(0x1d8,'Vnkf')),_0x5359b7=document['getElementById']('pauseResumeButton');if(_0x312e6b)_0x312e6b[_0x3756a6(0x1c3,'e*5r')]=![];if(_0x39289f)_0x39289f['disabled']=!![];if(_0x5359b7)_0x5359b7[_0x3756a6(0x22a,'$5!]')]=!![];logInfo('Recording\x20stopped\x20by\x20user.\x20Finalizing\x20transcription.');}function updateTranscriptionOutput(){const _0x4af62c=_0x4b4f,_0x4686de=Object['keys'](transcriptChunks)[_0x4af62c(0x216,'!0c%')](Number)['sort']((_0x4c32c1,_0x277f7c)=>_0x4c32c1-_0x277f7c);let _0x305fd9='';_0x4686de['forEach'](_0x55d0e2=>{_0x305fd9+=transcriptChunks[_0x55d0e2]+'\x20';});const _0x400880=document['getElementById'](_0x4af62c(0x1fa,'6eGK'));_0x400880&&(_0x400880['value']=_0x305fd9[_0x4af62c(0x1f1,'Vnkf')]()),manualStop&&Object[_0x4af62c(0x1ef,'1c4P')](transcriptChunks)[_0x4af62c(0x1cb,'KM]R')]>=chunkNumber-0x1&&(clearInterval(completionTimerInterval),updateStatusMessage('Transcription\x20finished!','green'),logInfo('Transcription\x20complete.'));}function floatTo16BitPCM(_0x173936){const _0x472c75=_0x4b4f,_0x4e7e1a=new Int16Array(_0x173936[_0x472c75(0x20e,'8LGt')]);for(let _0xa54bbe=0x0;_0xa54bbe<_0x173936['length'];_0xa54bbe++){let _0x2c8727=Math['max'](-0x1,Math[_0x472c75(0x1ba,'L)x$')](0x1,_0x173936[_0xa54bbe]));_0x4e7e1a[_0xa54bbe]=_0x2c8727<0x0?_0x2c8727*0x8000:_0x2c8727*0x7fff;}return _0x4e7e1a;}function encodeWAV(_0x1e1e0c,_0x467f27,_0x93e932){const _0x3c919f=_0x4b4f,_0x4a250d=new ArrayBuffer(0x2c+_0x1e1e0c['length']*0x2),_0x498080=new DataView(_0x4a250d);function _0x6ceb83(_0xc3faee,_0x2fd17f){for(let _0x45b1aa=0x0;_0x45b1aa<_0x2fd17f['length'];_0x45b1aa++){_0x498080['setUint8'](_0xc3faee+_0x45b1aa,_0x2fd17f['charCodeAt'](_0x45b1aa));}}_0x6ceb83(0x0,'RIFF'),_0x498080['setUint32'](0x4,0x24+_0x1e1e0c['length']*0x2,!![]),_0x6ceb83(0x8,'WAVE'),_0x6ceb83(0xc,'fmt\x20'),_0x498080[_0x3c919f(0x1bc,')&lc')](0x10,0x10,!![]),_0x498080['setUint16'](0x14,0x1,!![]),_0x498080[_0x3c919f(0x226,'6eGK')](0x16,_0x93e932,!![]),_0x498080['setUint32'](0x18,_0x467f27,!![]),_0x498080['setUint32'](0x1c,_0x467f27*_0x93e932*0x2,!![]),_0x498080[_0x3c919f(0x200,'@NeY')](0x20,_0x93e932*0x2,!![]),_0x498080[_0x3c919f(0x215,'Vnkf')](0x22,0x10,!![]),_0x6ceb83(0x24,'data'),_0x498080['setUint32'](0x28,_0x1e1e0c['length']*0x2,!![]);let _0x407471=0x2c;for(let _0x4fd6a1=0x0;_0x4fd6a1<_0x1e1e0c['length'];_0x4fd6a1++,_0x407471+=0x2){_0x498080['setInt16'](_0x407471,_0x1e1e0c[_0x4fd6a1],!![]);}return new Blob([_0x498080],{'type':'audio/wav'});}function scheduleChunk(){const _0x104259=_0x4b4f;if(manualStop||recordingPaused){logDebug(_0x104259(0x1c7,'&lv7'));return;}const _0x7c567=Date['now']()-chunkStartTime,_0x3ab8ca=Date['now']()-lastFrameTime;_0x7c567>=MAX_CHUNK_DURATION||_0x7c567>=MIN_CHUNK_DURATION&&_0x3ab8ca>=watchdogThreshold?(logInfo('Scheduling\x20condition\x20met;\x20processing\x20chunk.'),safeProcessAudioChunk(),chunkStartTime=Date[_0x104259(0x201,'KM]R')](),scheduleChunk()):chunkTimeoutId=setTimeout(scheduleChunk,0x1f4);}function resetRecordingState(){const _0x4abb8c=_0x4b4f;Object['values'](pollingIntervals)['forEach'](_0x27eacc=>clearInterval(_0x27eacc)),pollingIntervals={},clearTimeout(chunkTimeoutId),clearInterval(recordingTimerInterval),transcriptChunks={},audioFrames=[],chunkStartTime=Date['now'](),lastFrameTime=Date['now'](),manualStop=![],finalChunkProcessed=![],recordingPaused=![],groupId=Date['now']()[_0x4abb8c(0x21d,'(wsp')](),chunkNumber=0x1,accumulatedRecordingTime=0x0;}function initRecording(){const _0xb50532=_0x4b4f,_0x28c9ac=document[_0xb50532(0x1b9,'aIEW')](_0xb50532(0x219,'6eGK')),_0x4457a7=document[_0xb50532(0x209,'#4Kb')]('stopButton'),_0x3f2683=document['getElementById']('pauseResumeButton');if(!_0x28c9ac||!_0x4457a7||!_0x3f2683)return;_0x28c9ac[_0xb50532(0x210,'SvF7')]('click',async()=>{const _0x381032=_0xb50532,_0x53b9cc=getAPIKey();if(!_0x53b9cc||!_0x53b9cc['startsWith']('sk-')){alert('Please\x20enter\x20a\x20valid\x20OpenAI\x20API\x20key\x20before\x20starting\x20the\x20recording.');return;}resetRecordingState();const _0x15b398=document[_0x381032(0x21c,'gOTM')](_0x381032(0x1da,'(wsp'));if(_0x15b398)_0x15b398['value']='';updateStatusMessage(_0x381032(0x1d9,'1c4P'),_0x381032(0x1e3,'8qd2')),logInfo(_0x381032(0x208,'#YpX'));try{mediaStream=await navigator['mediaDevices'][_0x381032(0x228,'bx3d')]({'audio':!![]}),recordingStartTime=Date[_0x381032(0x1e7,'pNro')](),recordingTimerInterval=setInterval(updateRecordingTimer,0x3e8);const _0x66e793=mediaStream['getAudioTracks']()[0x0],_0x3e32cf=new MediaStreamTrackProcessor({'track':_0x66e793});audioReader=_0x3e32cf['readable']['getReader']();function _0x288df4(){const _0x4633c2=_0x381032;audioReader[_0x4633c2(0x1e8,'lwg*')]()['then'](({done:_0x4332b1,value:_0x114922})=>{const _0x1c7429=_0x4633c2;if(_0x4332b1){logInfo(_0x1c7429(0x22c,'ee!8'));return;}lastFrameTime=Date['now'](),audioFrames['push'](_0x114922),_0x288df4();})['catch'](_0x2e8401=>{logError('Error\x20reading\x20audio\x20frames',_0x2e8401);});}_0x288df4(),scheduleChunk(),logInfo('MediaStreamTrackProcessor\x20started,\x20reading\x20audio\x20frames.'),_0x28c9ac[_0x381032(0x1e1,'Yjg$')]=!![],_0x4457a7['disabled']=![],_0x3f2683['disabled']=![],_0x3f2683[_0x381032(0x1d3,'w$HK')]='Pause\x20Recording';}catch(_0x10dbbb){updateStatusMessage('Microphone\x20access\x20error:\x20'+_0x10dbbb,_0x381032(0x1eb,'(wsp')),logError('Microphone\x20access\x20error',_0x10dbbb);}}),_0x3f2683['addEventListener'](_0xb50532(0x1d2,'xnbh'),async()=>{const _0x4c9411=_0xb50532;if(!mediaStream||recordingPaused)try{mediaStream=await navigator['mediaDevices']['getUserMedia']({'audio':!![]});const _0x2977a1=mediaStream['getAudioTracks']()[0x0],_0xc325c2=new MediaStreamTrackProcessor({'track':_0x2977a1});audioReader=_0xc325c2['readable']['getReader']();function _0x5d7d1c(){audioReader['read']()['then'](({done:_0x347b73,value:_0x2d2b1b})=>{const _0x30580a=_0x4b4f;if(_0x347b73){logInfo('Audio\x20track\x20reading\x20complete.');return;}lastFrameTime=Date['now'](),audioFrames[_0x30580a(0x222,'8qd2')](_0x2d2b1b),_0x5d7d1c();})['catch'](_0x480eb3=>{logError('Error\x20reading\x20audio\x20frames',_0x480eb3);});}_0x5d7d1c(),recordingPaused=![],recordingStartTime=Date['now'](),lastFrameTime=Date['now'](),recordingTimerInterval=setInterval(updateRecordingTimer,0x3e8),_0x3f2683['innerText']=_0x4c9411(0x1f7,'gkq5'),updateStatusMessage('Recording...','green'),chunkStartTime=Date['now'](),scheduleChunk(),logInfo('Recording\x20resumed.');}catch(_0x3fd02e){updateStatusMessage('Error\x20resuming\x20recording:\x20'+_0x3fd02e,_0x4c9411(0x1f0,'75RA')),logError('Error\x20resuming\x20microphone\x20on\x20resume',_0x3fd02e);}else{await safeProcessAudioChunk(![]),accumulatedRecordingTime+=Date[_0x4c9411(0x1d4,'#4Kb')]()-recordingStartTime,stopMicrophone(),recordingPaused=!![],clearInterval(recordingTimerInterval),clearTimeout(chunkTimeoutId),_0x3f2683['innerText']='Resume\x20Recording',updateStatusMessage(_0x4c9411(0x1dd,'!#)X'),'orange'),logInfo(_0x4c9411(0x20f,'1c4P'));const _0x5eabbe=document['getElementById']('startButton'),_0x1c9c18=document[_0x4c9411(0x21f,'@NeY')](_0x4c9411(0x1fd,')&lc'));if(_0x5eabbe)_0x5eabbe['disabled']=!![];if(_0x1c9c18)_0x1c9c18['disabled']=![];_0x3f2683['disabled']=![];}}),_0x4457a7['addEventListener']('click',async()=>{const _0x4cdf41=_0xb50532;updateStatusMessage('Finishing\x20transcription...','blue'),manualStop=!![],clearTimeout(chunkTimeoutId),clearInterval(recordingTimerInterval),stopMicrophone(),chunkStartTime=0x0,lastFrameTime=0x0,await new Promise(_0x1d8913=>setTimeout(_0x1d8913,0xc8));if(audioFrames[_0x4cdf41(0x227,'aIEW')]===0x0&&!processedAnyAudioFrames){resetRecordingState();completionTimerInterval&&(clearInterval(completionTimerInterval),completionTimerInterval=null);const _0x470170=document[_0x4cdf41(0x211,'WIu)')]('transcribeTimer');_0x470170&&(_0x470170['innerText']=_0x4cdf41(0x213,'j9t^'));const _0x20389e=document[_0x4cdf41(0x1bf,')&lc')](_0x4cdf41(0x202,'#4Kb'));_0x20389e&&(_0x20389e[_0x4cdf41(0x1d0,'6eGK')]=_0x4cdf41(0x21e,'rZkh'));updateStatusMessage('Recording\x20reset.\x20Ready\x20to\x20start.','green');const _0x59e233=document['getElementById'](_0x4cdf41(0x1c4,'St(O'));if(_0x59e233)_0x59e233['disabled']=![];_0x4457a7['disabled']=!![];const _0x9400bb=document['getElementById']('pauseResumeButton');if(_0x9400bb)_0x9400bb['disabled']=!![];logInfo('No\x20audio\x20frames\x20captured.\x20Full\x20reset\x20performed.'),processedAnyAudioFrames=![];return;}else{if(chunkProcessingLock)pendingStop=!![],logDebug('Chunk\x20processing\x20locked\x20at\x20stop;\x20setting\x20pendingStop.');else{await safeProcessAudioChunk(!![]);if(!processedAnyAudioFrames){resetRecordingState();completionTimerInterval&&(clearInterval(completionTimerInterval),completionTimerInterval=null);const _0x46680f=document['getElementById']('transcribeTimer');_0x46680f&&(_0x46680f['innerText']=_0x4cdf41(0x22e,'dGT0'));const _0x885521=document['getElementById']('recordTimer');_0x885521&&(_0x885521[_0x4cdf41(0x1d6,'St(O')]='Recording\x20Timer:\x200\x20sec');updateStatusMessage(_0x4cdf41(0x1bd,'WIu)'),'green');const _0x1b41bb=document['getElementById'](_0x4cdf41(0x1ec,'nVHC'));if(_0x1b41bb)_0x1b41bb['disabled']=![];_0x4457a7['disabled']=!![];const _0x6ce688=document['getElementById']('pauseResumeButton');if(_0x6ce688)_0x6ce688[_0x4cdf41(0x1f9,'j9t^')]=!![];logInfo(_0x4cdf41(0x22b,'WIu)')),processedAnyAudioFrames=![];}else finalChunkProcessed=!![],finalizeStop(),logInfo('Stop\x20button\x20processed;\x20final\x20chunk\x20handled.');}}});}function _0x4830(){const _0x446014=['cComcmonma','W5xcHNBdTSkMWPZcSw/cMW','W7tdRSkj','WQmXW6tdGCkHeZpdUmoamepcSbq','WRFcRNxcIcpcN8opWPJdSq','d8olggNcU8kigCo1dCo4W5hdQM1I','WPlcLCoPtu8lW4dcHGOV','qKrdfSkCz8o2eehcOLldTq','WQ9wwmoEW6xdIg4jW6NdVZ7cSSkU','WR8Gasme','W4qfpSo5E8kcht7cQ8ozz8kxk8kyWR9gjmoV','iJSRiSoZWQFcRvxdJ8kKWRyWbru5W6C','fCkrnCk7mbpcIa','WRZcThtcJa','tSkmwdq','W5D6FmoiWRRcL1qV','zSouqCoRWRPRWQFdUYiAWRhdTsxdVNicFmokWP8MW5rCqWVdKvldV8o5WPKYW4lcU11gFCkKn8ollG','gJ/cM10D','WO7cJmoDoJtdHMi','WOtdJtxdMN4JvH7dJq3cUYL8eSoxWQjTrCokWRbiECoTgmkNWOi','W78AcmoJsmkIuXG','k8ofja','W7i6W4DI','W74gpSoLzCkQtrBcPmo7iSkl','WOfDW7LdWRe','WQLbxq','WPffW7DcWQdcJ8klEwFcPmke','WRVcJmokhdldH2BdGwjpjGhcO8kpoNbd','W4nzoSoKex7cVG','E0rzcG','wSk9W6W','WPxcK8oVua','WPqLdt4zWO/dICothCoqWQddJSkCwbKssCkkW4e','W70tzSoueG/cQN3dNq','WP1RhSoSbGVdMCoZkWC5EmoHzX59WOLckSoslcBdLCoKW5ldLdXVtXixu0FcPYdcOeyPWPhcRSkdhCoCWQJdGCok','r1lcH3NdRmkHeIxcHCo3WPu','WRlcRCoSmrxdPfi','pCktxYvLECoIkgxdNMNcN8oCWQ4j','W5NdP2FcSw5o','W7JcVSoMkmkYWRfioa','WQXssJnxWQxdUINdQLK3Emk7','a8kOxtNcIW','qbHNW7pdGrZdJcdcImkvdSoW','lmo/p8oQxSkbW6a3W5RdLq','W7WowfFcKmkq','W4BdTNdcUN8','bCk7fKtdImoyBKddOa','vbVdUG','W6JdPmkDhSouWRvbW7zZksu','dJNcN0Oh','g8oVWRSYcY7cImk5W6S','W7ddQbZcSa','yf/cGwpdRSoVaYpcG8o7WP5GWRNdNSoIWQddQSkVCSkUWR3dTvy6qXNcJKNdLsRdVGnJWQNcLwfdAcCtWP3dPmkVsuZdP8kYW48OWP3dQh7dNCkCWQ7dGCkKWRjw','hCoxAKpdTG','jmkBomk6jXtcLrxcVr59W4pcGL8NW5/cVfy','W73dPmkknmokWRr4W7PWobxdMSomWPu','xmokqZnLemoNaW','W7GDmSoXtG','W6/dNuy4W4JdVgO','fCk1pSkFWPPHWRlcIIu','W5pdN1bXWOCT','qKrdfSkCz8o2eehcRaZcUIhcKNtcJ8o+cbSnWR/cHaJcHSk/WQ7dS8o0uSocWRPfa8k5ebBcT8kJW5qbW4RcTaFdKLFdHb4jmZ3dNSkcn1dcLNjFfCkYWQGLW4RdVb1ZAuq','qG5MW5FdGXZdOchcOSkAgmo2WP8oW6JdSW','WQC7W6ddVCkzgr3dTCopkM/cRdeK','W77cS37cJG','W5/cUmo4oCk8WRHznwvLWPPOi8kGespcKIVcJX7cQSoyW7W','W6Oze292WPxdNZddLga','WPlcHmoYAgqqW4ddG1m','WRqThG','W5aiWQ4cWOBcNSkPFv3cHG','w8k9W7WwecZcSG','WQTusI9qWOtdVttdRKiW','W7mEWO7cUa','WPj6hSoib1dcLCk3oq','WO7cJmoDnIZdHMldIMSBmbhcH8ko','WQ9lASoeW6tdGNih','W7aPDCojdX/cReZdPCk8iCk+WP/dHCoHDCoSWR/cNmkZgSk4','eCk7fLtdJCotDXtcUmoqwv3cQSkC','eLGXWQFcHK3cVMxcUCkMb8ovWOKW','qmoRushcKSoduJNcKmonta','dtJcJva','W5mbWQqhW6hdVmoowudcOSkjBSo7','W6CApa','WOPnW45yWQ/dPMGfgSkwW7W','WQTfxWHnWQJdVhhcRa','emocDeJdU8oP','W53cOLvxxbW8WRa/vmoVyW','WOeIoCo9WPpcLf0Auq','q8oTE8kQWRnIWRVcVW','WO4XWRtdMCkagbNdV8kbof/cTbuLDCk5W48yeCoEWPSfm8oTW592xhJdIGFdT8klWQRdISkUhZ7cKSoEDCkShWvrgr/cPIlcH0hcIgn1rbWhW6ORamkPWQP2W4tdMXrwrfhcJbRcTN7dUutdSeu','WOOduCousLtdScqMubnOfvGMWO9Fzau7D2tcIcPouaNdHL0','W47cIxBdT8k7WQxcGulcPSoI','WPpdQHJcRSo8nmoyWQagW7DSWPtdTh5aW4xdGcxcHdNdLsSf','g8ocBMRdO8oKW77cHCoaW7nZeNxdQW','u8kqrq','WR4TbYi','lmoUjmopDCkAW6bWWOC','WPi7W7FdL8khgbNdVSogFL/cSaSLCSk3WP84g8oCWPOpymo8W5r2tMRdNXddSCkf','W7NcQeXYqXW6WPq1xSkMvSkSFGXBae8','omoUjmoFCmkrW7KMW5VdJYhcM8krtG','W7/dMuaF','cmoisvVdVCoOW73cHW','WQVdPWhdGwK0eG','aCkTqtFcMW5iW5G','WQ3cThRcNYxcICoFWPtdSCkVW4y','W4qOzMJcI8kIWOqntI5JsI4','W7ehWOtcSWZcKZxdJwe','W7inv8oHFKuTdqBdUSoimCkwW5FcOCkeWQXjvSolW4FdPqddQSoIW6RcHmk7tCkqWPDqW7O7WRDeiHNcPCkcWO18eancn8kxmG','W5NcV8oxDCklCSkiW6yyx3q','v8kxrtNdUSoOtmk9lG','WP/dS8kdnCojaCoiW7qLFhVcKmkj','vHhdO0xdIM8','WRLurd8','BmkiiSoZ','WPb0jCkutu/cVfhdGmovjCk2','WOZcJWKIW4z0W53cMmonWQJcGmkhWR3cUq','WRfortHwWPldRtJdRG','WR9bt8ozW7xdJKmuW7BdOdlcSW'];_0x4830=function(){return _0x446014;};return _0x4830();}export{initRecording};